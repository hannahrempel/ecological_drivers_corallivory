geom_smooth(aes(x=mean_density_major_corallivores, y=mean_pct_coral_grazed, color=region), method="lm")+
geom_point(aes(x=mean_density_major_corallivores, y=mean_pct_coral_grazed, color=region), alpha=0.7)+
scale_color_manual(values=region_palette)+
scale_y_continuous(trans = scales::log_trans(),
breaks= c(0.00025, 0.0025, 0.025, 0.25, 2.5, 0.25),
labels= c(0.00025, 0.0025, 0.025, 0.25, 2.5, 0.25))+
scale_x_continuous(expand = c(0.1, 0))+ #values near 0 cutoff, expands x-axis to resolve issue
labs(x=expression(paste("Major corallivore density (n 100 ", m^-2, ")")),
y=expression(paste("Coral area predated (%)")),
color="Region") +
theme_bw()
#scar density ~ coral cover
site_level_scar_density_by_coral_cover <- fish_corals_site_level %>%
ggplot()+
geom_smooth(aes(y=mean_scars_m2_coral, x=mean_pct_coral_cover, color=region), method="lm")+
geom_jitter(aes(y=mean_scars_m2_coral, x=mean_pct_coral_cover, color=region), alpha=0.7)+
scale_colour_manual(values=region_palette)+
scale_y_continuous(trans = scales::log_trans(),
breaks= c(0.1, 1, 10, 100),
labels= c(0.1, 1, 10, 100))+
labs(y=expression(paste("Scar density (n ", m^-2, " coral)")), x="Coral cover (%)", color="Region")+
theme_bw()+
theme(legend.position = "top")+
rremove("x.title") +
rremove("x.ticks") +
rremove("x.text")+
rremove("y.title") +
rremove("y.ticks") +
rremove("y.text")
#coral area grazed ~ coral cover
site_level_coral_area_grazed_by_coral_cover <- fish_corals_site_level %>%
ggplot()+
geom_smooth(aes(y=mean_pct_coral_grazed, x=mean_pct_coral_cover, color=region), method="lm")+
geom_jitter(aes(y=mean_pct_coral_grazed, x=mean_pct_coral_cover, color=region), alpha=0.7)+
scale_colour_manual(values=region_palette)+
scale_y_continuous(trans = scales::log_trans(),
breaks= c(0.00025, 0.0025, 0.025, 0.25, 2.5, 0.25),
labels= c(0.00025, 0.0025, 0.025, 0.25, 2.5, 0.25))+
labs(y="Coral area predated (%)", x="Coral cover (%)", color="Region")+
theme_bw()+
theme(legend.position = "top")+
rremove("y.title") +
rremove("y.ticks") +
rremove("y.text")
#a regular ggarrange plot with all four fig panels had weird spacing, this is a hacky get around for that
site_level_corallivory_patterns_ac <- ggpubr::ggarrange(site_level_scar_density_by_corallivore_density +
theme(plot.margin =unit(c(t = 5, r = 5, b = 5, l = 25), "pt"))+
rremove("legend"),
site_level_coral_area_grazed_by_corallivore_density+
theme(plot.margin =unit(c(t = 5, r = 5, b = 5, l = 25), "pt"),
axis.title.x = element_text(margin = margin(t = 2.5, r = 0, b = 0, l = 0)))+
rremove("legend"),
nrow=2,
ncol=1,
align="v",
labels=c("a", "c"),
heights=c(1, 1.15))
site_level_corallivory_patterns_bd <- ggpubr::ggarrange(site_level_scar_density_by_coral_cover+
theme(plot.margin =unit(c(t = 0, r = 5, b = 5, l = 25), "pt"))+
rremove("legend"),
site_level_coral_area_grazed_by_coral_cover+
theme(plot.margin =unit(c(t = 5, r = 5, b = 0, l = 25), "pt"),
axis.title.x = element_text(
margin = margin(t = 7.5, r = 0, b = 0, l = 0)))+
rremove("legend"),
nrow=2,
ncol=1,
align="v",
labels=c("b", "d"),
heights=c(1, 1.15))
site_level_corallivory_patterns_temp <- ggpubr::ggarrange(site_level_corallivory_patterns_ac,
site_level_corallivory_patterns_bd+
theme(plot.margin =unit(c(5, 5, 5, 5), "pt")),
widths=c(1.2, 1))
common_legend <- ggpubr::get_legend(site_level_scar_density_by_coral_cover) %>%
as_ggplot()
site_level_corallivory_patterns <- ggpubr::ggarrange(common_legend,
site_level_corallivory_patterns_temp,
nrow=2,
ncol=1,
heights = c(1,10))
site_level_corallivory_patterns
site_level_corallivory_patterns_with_images <- cowplot::ggdraw() +
draw_plot(site_level_corallivory_patterns)+
draw_image(major_corallivore_icon,  x = -0.38, y = -0.47, scale=0.08) + #adds the major pf icon
draw_image(coral_icon, x = 0.175, y = -0.47, scale=0.055)+ #adds the coral
draw_image(corallivory_icon,  x = -0.448, y = 0.379, scale=0.055) + #adds corallivory icon
draw_image(corallivory_icon,  x = -0.448, y = -0.05, scale=0.055) #adds corallivory icon
ggsave(plot=site_level_corallivory_patterns_with_images,
filename=here("figures_tables/fig4_corallivory_by_coral_and_fish.jpg"),
width = 215, height = 160, dpi = 600, units = "mm")
fish_df
View(fish_corals_site_level)
View(transect_corallivory_diversity_df)
selectivity_genus_final
#adding coral images to figure (image placement is off in R, but good in ggsave generated png)
selectivity_genus_final <- cowplot::ggdraw() +
draw_plot(selectivity_genus_temp)+ #adds the plot (order matters to overlay the layers correctly)
draw_image(agaricia_image, x = -0.295, y = 0.375, scale=0.12)+
draw_image(madracis_image, x = -0.11, y = 0.377, scale=0.09)+
draw_image(orbicella_image, x = 0.067, y = 0.375, scale=0.07)+
draw_image(porites_image, x = 0.249, y = 0.38, scale=0.07)+
draw_image(siderastrea_image, x = 0.4265, y = 0.38, scale=0.065)
selectivity_genus_final
selectivity_df_genus
View(coral_scar_df)
coral_scar_df %>% filter(total_n_scars>0)
coral_scar_df %>% filter(total_n_scars>0)
coral_scar_df
coral_scar_df %>%
filter(n_new_scars>0)
coral_scar_df %>%
filter(n_new_scars>0) %>%
filter(coral_species == "Stephanocoenia intersepta")
coral_scar_df %>%
filter(n_new_scars>0) %>%
filter(coral_species == "Agaricia spp.")
coral_scar_df %>%
filter(n_new_scars>0) %>%
filter(coral_species == "Agaricia sp.")
coral_scar_df %>%
filter(n_new_scars>0) %>%
filter(coral_species == "Agaricia spp.")
coral_scar_df %>%
filter(n_new_scars>0) %>%
filter(coral_species == "Agaricia agaricites")
coral_scar_df %>%
filter(n_new_scars>0) %>%
filter(coral_species == "Agaricia tenuifolia")
coral_scar_df %>%
filter(n_new_scars>0) %>%
filter(coral_species == "Agaricia lamarki")
coral_scar_df %>%
filter(n_new_scars>0) %>%
filter(coral_species == "Stephanocoenia intersepta")
coral_scar_df
coral_scar_df %>%
filter(n_new_scars>0) %>%
group_by(coral_species) %>%
reframe(n=n())
stephanocinea_image <- magick::image_read(path=here("figures_tables/reef_images", "Stephanocinea_intersepta.png"), density = NULL, depth = NULL, strip = TRUE)
stephanocinea_image <- magick::image_read(path=here("figures_tables/reef_images", "Stephanocoenia_intersepta.png"), density = NULL, depth = NULL, strip = TRUE)
#adding coral images to figure (image placement is off in R, but good in ggsave generated png)
selectivity_genus_final <- cowplot::ggdraw() +
draw_plot(selectivity_genus_temp)+ #adds the plot (order matters to overlay the layers correctly)
draw_image(agaricia_image, x = -0.295, y = 0.375, scale=0.12)+
draw_image(madracis_image, x = -0.11, y = 0.377, scale=0.09)+
draw_image(orbicella_image, x = 0.067, y = 0.375, scale=0.07)+
draw_image(porites_image, x = 0.249, y = 0.38, scale=0.07)+
draw_image(siderastrea_image, x = 0.4265, y = 0.38, scale=0.065)+
draw_image(stephanocinea_image, x = 0.4265, y = 0.38, scale=0.065)
selectivity_genus_final
#saving figure
ggsave(plot=selectivity_genus_final, filename=here("figures_tables/fig3_selectivity_by_genera.jpg"), width = 215, height = 110, dpi = 600, units = "mm")
selectivity_genus_final
#adding coral images to figure (image placement is off in R, but good in ggsave generated png)
selectivity_genus_final <- cowplot::ggdraw() +
draw_plot(selectivity_genus_temp)+ #adds the plot (order matters to overlay the layers correctly)
draw_image(agaricia_image, x = -0.25, y = 0.375, scale=0.12)+
draw_image(madracis_image, x = -0.11, y = 0.377, scale=0.09)+
draw_image(orbicella_image, x = 0.067, y = 0.375, scale=0.07)+
draw_image(porites_image, x = 0.249, y = 0.38, scale=0.07)+
draw_image(siderastrea_image, x = 0.4265, y = 0.38, scale=0.065)+
draw_image(stephanocinea_image, x = 0.4265, y = 0.38, scale=0.065)
selectivity_genus_final
#adding coral images to figure (image placement is off in R, but good in ggsave generated png)
selectivity_genus_final <- cowplot::ggdraw() +
draw_plot(selectivity_genus_temp)+ #adds the plot (order matters to overlay the layers correctly)
draw_image(agaricia_image, x = -0.3, y = 0.375, scale=0.12)+
draw_image(madracis_image, x = -0.19, y = 0.377, scale=0.09)+
draw_image(orbicella_image, x = 0.09, y = 0.375, scale=0.07)+
draw_image(porites_image, x = 0.15, y = 0.38, scale=0.07)+
draw_image(siderastrea_image, x = 0.33, y = 0.38, scale=0.065)+
draw_image(stephanocinea_image, x = 0.4265, y = 0.38, scale=0.065)
selectivity_genus_final
#adding coral images to figure (image placement is off in R, but good in ggsave generated png)
selectivity_genus_final <- cowplot::ggdraw() +
draw_plot(selectivity_genus_temp)+ #adds the plot (order matters to overlay the layers correctly)
draw_image(agaricia_image, x = -0.33, y = 0.375, scale=0.12)+
draw_image(madracis_image, x = -0.17, y = 0.377, scale=0.09)+
draw_image(orbicella_image, x = 0.0, y = 0.375, scale=0.07)+
draw_image(porites_image, x = 0.12, y = 0.38, scale=0.07)+
draw_image(siderastrea_image, x = 0.27, y = 0.38, scale=0.065)+
draw_image(stephanocinea_image, x = 0.4265, y = 0.38, scale=0.065)
selectivity_genus_final
#adding coral images to figure (image placement is off in R, but good in ggsave generated png)
selectivity_genus_final <- cowplot::ggdraw() +
draw_plot(selectivity_genus_temp)+ #adds the plot (order matters to overlay the layers correctly)
draw_image(agaricia_image, x = -0.3, y = 0.375, scale=0.12)+
draw_image(madracis_image, x = -0.17, y = 0.377, scale=0.09)+
draw_image(orbicella_image, x = -0.09, y = 0.375, scale=0.07)+
draw_image(porites_image, x = 0.12, y = 0.38, scale=0.07)+
draw_image(siderastrea_image, x = 0.27, y = 0.38, scale=0.065)+
draw_image(stephanocinea_image, x = 0.4265, y = 0.38, scale=0.065)
selectivity_genus_final
#adding coral images to figure (image placement is off in R, but good in ggsave generated png)
selectivity_genus_final <- cowplot::ggdraw() +
draw_plot(selectivity_genus_temp)+ #adds the plot (order matters to overlay the layers correctly)
draw_image(agaricia_image, x = -0.3, y = 0.375, scale=0.12)+
draw_image(madracis_image, x = -0.17, y = 0.377, scale=0.09)+
draw_image(orbicella_image, x = -0.01, y = 0.375, scale=0.07)+
draw_image(porites_image, x = 0.12, y = 0.38, scale=0.07)+
draw_image(siderastrea_image, x = 0.27, y = 0.38, scale=0.065)+
draw_image(stephanocinea_image, x = 0.4265, y = 0.38, scale=0.065)
selectivity_genus_final
#adding coral images to figure (image placement is off in R, but good in ggsave generated png)
selectivity_genus_final <- cowplot::ggdraw() +
draw_plot(selectivity_genus_temp)+ #adds the plot (order matters to overlay the layers correctly)
draw_image(agaricia_image, x = -0.34, y = 0.375, scale=0.12)+
draw_image(madracis_image, x = -0.17, y = 0.377, scale=0.09)+
draw_image(orbicella_image, x = -0.01, y = 0.375, scale=0.07)+
draw_image(porites_image, x = 0.12, y = 0.38, scale=0.07)+
draw_image(siderastrea_image, x = 0.27, y = 0.38, scale=0.065)+
draw_image(stephanocinea_image, x = 0.4265, y = 0.38, scale=0.065)
selectivity_genus_final
#adding coral images to figure (image placement is off in R, but good in ggsave generated png)
selectivity_genus_final <- cowplot::ggdraw() +
draw_plot(selectivity_genus_temp)+ #adds the plot (order matters to overlay the layers correctly)
draw_image(agaricia_image, x = -0.32, y = 0.375, scale=0.12)+
draw_image(madracis_image, x = -0.17, y = 0.377, scale=0.09)+
draw_image(orbicella_image, x = -0.01, y = 0.375, scale=0.07)+
draw_image(porites_image, x = 0.12, y = 0.38, scale=0.07)+
draw_image(siderastrea_image, x = 0.27, y = 0.38, scale=0.065)+
draw_image(stephanocinea_image, x = 0.4265, y = 0.38, scale=0.065)
selectivity_genus_final
#adding coral images to figure (image placement is off in R, but good in ggsave generated png)
selectivity_genus_final <- cowplot::ggdraw() +
draw_plot(selectivity_genus_temp)+ #adds the plot (order matters to overlay the layers correctly)
draw_image(agaricia_image, x = -0.32, y = 0.375, scale=0.12)+
draw_image(madracis_image, x = -0.17, y = 0.377, scale=0.09)+
draw_image(orbicella_image, x = -0.03, y = 0.375, scale=0.07)+
draw_image(porites_image, x = 0.12, y = 0.38, scale=0.07)+
draw_image(siderastrea_image, x = 0.27, y = 0.38, scale=0.065)+
draw_image(stephanocinea_image, x = 0.4265, y = 0.38, scale=0.065)
selectivity_genus_final
#adding coral images to figure (image placement is off in R, but good in ggsave generated png)
selectivity_genus_final <- cowplot::ggdraw() +
draw_plot(selectivity_genus_temp)+ #adds the plot (order matters to overlay the layers correctly)
draw_image(agaricia_image, x = -0.32, y = 0.375, scale=0.12)+
draw_image(madracis_image, x = -0.17, y = 0.377, scale=0.09)+
draw_image(orbicella_image, x = -0.02, y = 0.375, scale=0.07)+
draw_image(porites_image, x = 0.12, y = 0.38, scale=0.07)+
draw_image(siderastrea_image, x = 0.27, y = 0.38, scale=0.065)+
draw_image(stephanocinea_image, x = 0.4265, y = 0.38, scale=0.065)
selectivity_genus_final
#adding coral images to figure (image placement is off in R, but good in ggsave generated png)
selectivity_genus_final <- cowplot::ggdraw() +
draw_plot(selectivity_genus_temp)+ #adds the plot (order matters to overlay the layers correctly)
draw_image(agaricia_image, x = -0.32, y = 0.375, scale=0.12)+
draw_image(madracis_image, x = -0.17, y = 0.377, scale=0.09)+
draw_image(orbicella_image, x = -0.02, y = 0.375, scale=0.07)+
draw_image(porites_image, x = 0.13, y = 0.38, scale=0.07)+
draw_image(siderastrea_image, x = 0.27, y = 0.38, scale=0.065)+
draw_image(stephanocinea_image, x = 0.4265, y = 0.38, scale=0.065)
selectivity_genus_final
#adding coral images to figure (image placement is off in R, but good in ggsave generated png)
selectivity_genus_final <- cowplot::ggdraw() +
draw_plot(selectivity_genus_temp)+ #adds the plot (order matters to overlay the layers correctly)
draw_image(agaricia_image, x = -0.32, y = 0.375, scale=0.12)+
draw_image(madracis_image, x = -0.17, y = 0.377, scale=0.09)+
draw_image(orbicella_image, x = -0.02, y = 0.375, scale=0.07)+
draw_image(porites_image, x = 0.13, y = 0.38, scale=0.07)+
draw_image(siderastrea_image, x = 0.28, y = 0.38, scale=0.065)+
draw_image(stephanocinea_image, x = 0.427, y = 0.38, scale=0.065)
selectivity_genus_final
#adding coral images to figure (image placement is off in R, but good in ggsave generated png)
selectivity_genus_final <- cowplot::ggdraw() +
draw_plot(selectivity_genus_temp)+ #adds the plot (order matters to overlay the layers correctly)
draw_image(agaricia_image, x = -0.32, y = 0.375, scale=0.11)+
draw_image(madracis_image, x = -0.17, y = 0.377, scale=0.085)+
draw_image(orbicella_image, x = -0.02, y = 0.375, scale=0.07)+
draw_image(porites_image, x = 0.13, y = 0.38, scale=0.068)+
draw_image(siderastrea_image, x = 0.28, y = 0.38, scale=0.062)+
draw_image(stephanocinea_image, x = 0.427, y = 0.38, scale=0.065)
selectivity_genus_final
#saving figure
ggsave(plot=selectivity_genus_final, filename=here("figures_tables/fig3_selectivity_by_genera.jpg"), width = 215, height = 110, dpi = 600, units = "mm")
#adding coral images to figure (image placement is off in R, but good in ggsave generated png)
selectivity_genus_final <- cowplot::ggdraw() +
draw_plot(selectivity_genus_temp)+ #adds the plot (order matters to overlay the layers correctly)
draw_image(agaricia_image, x = -0.32, y = 0.375, scale=0.11)+
draw_image(madracis_image, x = -0.17, y = 0.377, scale=0.085)+
draw_image(orbicella_image, x = -0.02, y = 0.375, scale=0.07)+
draw_image(porites_image, x = 0.13, y = 0.38, scale=0.068)+
draw_image(siderastrea_image, x = 0.28, y = 0.38, scale=0.059)+
draw_image(stephanocinea_image, x = 0.427, y = 0.38, scale=0.065)
selectivity_genus_final
#adding coral images to figure (image placement is off in R, but good in ggsave generated png)
selectivity_genus_final <- cowplot::ggdraw() +
draw_plot(selectivity_genus_temp)+ #adds the plot (order matters to overlay the layers correctly)
draw_image(agaricia_image, x = -0.32, y = 0.377, scale=0.1)+
draw_image(madracis_image, x = -0.17, y = 0.378, scale=0.085)+
draw_image(orbicella_image, x = -0.02, y = 0.377, scale=0.068)+
draw_image(porites_image, x = 0.13, y = 0.385, scale=0.066)+
draw_image(siderastrea_image, x = 0.28, y = 0.385, scale=0.057)+
draw_image(stephanocinea_image, x = 0.427, y = 0.385, scale=0.065)
selectivity_genus_final
#adding coral images to figure (image placement is off in R, but good in ggsave generated png)
selectivity_genus_final <- cowplot::ggdraw() +
draw_plot(selectivity_genus_temp)+ #adds the plot (order matters to overlay the layers correctly)
draw_image(agaricia_image, x = -0.32, y = 0.377, scale=0.1)+
draw_image(madracis_image, x = -0.17, y = 0.378, scale=0.085)+
draw_image(orbicella_image, x = -0.02, y = 0.377, scale=0.068)+
draw_image(porites_image, x = 0.13, y = 0.385, scale=0.066)+
draw_image(siderastrea_image, x = 0.28, y = 0.385, scale=0.055)+
draw_image(stephanocinea_image, x = 0.427, y = 0.385, scale=0.065)
selectivity_genus_final
#adding coral images to figure (image placement is off in R, but good in ggsave generated png)
selectivity_genus_final <- cowplot::ggdraw() +
draw_plot(selectivity_genus_temp)+ #adds the plot (order matters to overlay the layers correctly)
draw_image(agaricia_image, x = -0.32, y = 0.379, scale=0.1)+
draw_image(madracis_image, x = -0.17, y = 0.379, scale=0.085)+
draw_image(orbicella_image, x = -0.02, y = 0.378, scale=0.068)+
draw_image(porites_image, x = 0.13, y = 0.385, scale=0.066)+
draw_image(siderastrea_image, x = 0.28, y = 0.385, scale=0.055)+
draw_image(stephanocinea_image, x = 0.427, y = 0.385, scale=0.065)
selectivity_genus_final
#adding coral images to figure (image placement is off in R, but good in ggsave generated png)
selectivity_genus_final <- cowplot::ggdraw() +
draw_plot(selectivity_genus_temp)+ #adds the plot (order matters to overlay the layers correctly)
draw_image(agaricia_image, x = -0.32, y = 0.379, scale=0.1)+
draw_image(madracis_image, x = -0.17, y = 0.379, scale=0.085)+
draw_image(orbicella_image, x = -0.02, y = 0.378, scale=0.068)+
draw_image(porites_image, x = 0.13, y = 0.385, scale=0.066)+
draw_image(siderastrea_image, x = 0.28, y = 0.385, scale=0.055)+
draw_image(stephanocinea_image, x = 0.427, y = 0.384, scale=0.065)
selectivity_genus_final
#adding coral images to figure (image placement is off in R, but good in ggsave generated png)
selectivity_genus_final <- cowplot::ggdraw() +
draw_plot(selectivity_genus_temp)+ #adds the plot (order matters to overlay the layers correctly)
draw_image(agaricia_image, x = -0.32, y = 0.38, scale=0.1)+
draw_image(madracis_image, x = -0.17, y = 0.38, scale=0.085)+
draw_image(orbicella_image, x = -0.02, y = 0.378, scale=0.068)+
draw_image(porites_image, x = 0.13, y = 0.385, scale=0.066)+
draw_image(siderastrea_image, x = 0.28, y = 0.385, scale=0.055)+
draw_image(stephanocinea_image, x = 0.427, y = 0.384, scale=0.065)
selectivity_genus_final
#adding coral images to figure (image placement is off in R, but good in ggsave generated png)
selectivity_genus_final <- cowplot::ggdraw() +
draw_plot(selectivity_genus_temp)+ #adds the plot (order matters to overlay the layers correctly)
draw_image(agaricia_image, x = -0.32, y = 0.38, scale=0.1)+
draw_image(madracis_image, x = -0.17, y = 0.38, scale=0.085)+
draw_image(orbicella_image, x = -0.02, y = 0.378, scale=0.068)+
draw_image(porites_image, x = 0.13, y = 0.385, scale=0.064)+
draw_image(siderastrea_image, x = 0.28, y = 0.385, scale=0.055)+
draw_image(stephanocinea_image, x = 0.427, y = 0.384, scale=0.065)
selectivity_genus_final
#adding coral images to figure (image placement is off in R, but good in ggsave generated png)
selectivity_genus_final <- cowplot::ggdraw() +
draw_plot(selectivity_genus_temp)+ #adds the plot (order matters to overlay the layers correctly)
draw_image(agaricia_image, x = -0.32, y = 0.38, scale=0.1)+
draw_image(madracis_image, x = -0.17, y = 0.38, scale=0.085)+
draw_image(orbicella_image, x = -0.02, y = 0.378, scale=0.065)+
draw_image(porites_image, x = 0.13, y = 0.385, scale=0.06)+
draw_image(siderastrea_image, x = 0.28, y = 0.385, scale=0.052)+
draw_image(stephanocinea_image, x = 0.427, y = 0.384, scale=0.065)
selectivity_genus_final
#adding coral images to figure (image placement is off in R, but good in ggsave generated png)
selectivity_genus_final <- cowplot::ggdraw() +
draw_plot(selectivity_genus_temp)+ #adds the plot (order matters to overlay the layers correctly)
draw_image(agaricia_image, x = -0.32, y = 0.38, scale=0.1)+
draw_image(madracis_image, x = -0.17, y = 0.38, scale=0.085)+
draw_image(orbicella_image, x = -0.02, y = 0.378, scale=0.063)+
draw_image(porites_image, x = 0.13, y = 0.385, scale=0.06)+
draw_image(siderastrea_image, x = 0.28, y = 0.385, scale=0.052)+
draw_image(stephanocinea_image, x = 0.427, y = 0.384, scale=0.065)
selectivity_genus_final
#adding coral images to figure (image placement is off in R, but good in ggsave generated png)
selectivity_genus_final <- cowplot::ggdraw() +
draw_plot(selectivity_genus_temp)+ #adds the plot (order matters to overlay the layers correctly)
draw_image(agaricia_image, x = -0.32, y = 0.38, scale=0.1)+
draw_image(madracis_image, x = -0.17, y = 0.38, scale=0.085)+
draw_image(orbicella_image, x = -0.02, y = 0.378, scale=0.063)+
draw_image(porites_image, x = 0.13, y = 0.385, scale=0.06)+
draw_image(siderastrea_image, x = 0.28, y = 0.385, scale=0.052)+
draw_image(stephanocinea_image, x = 0.427, y = 0.384, scale=0.063)
selectivity_genus_final
#adding coral images to figure (image placement is off in R, but good in ggsave generated png)
selectivity_genus_final <- cowplot::ggdraw() +
draw_plot(selectivity_genus_temp)+ #adds the plot (order matters to overlay the layers correctly)
draw_image(agaricia_image, x = -0.32, y = 0.38, scale=0.1)+
draw_image(madracis_image, x = -0.17, y = 0.38, scale=0.082)+
draw_image(orbicella_image, x = -0.02, y = 0.378, scale=0.064)+
draw_image(porites_image, x = 0.13, y = 0.385, scale=0.06)+
draw_image(siderastrea_image, x = 0.28, y = 0.385, scale=0.052)+
draw_image(stephanocinea_image, x = 0.427, y = 0.384, scale=0.063)
selectivity_genus_final
#adding coral images to figure (image placement is off in R, but good in ggsave generated png)
selectivity_genus_final <- cowplot::ggdraw() +
draw_plot(selectivity_genus_temp)+ #adds the plot (order matters to overlay the layers correctly)
draw_image(agaricia_image, x = -0.32, y = 0.38, scale=0.1)+
draw_image(madracis_image, x = -0.17, y = 0.38, scale=0.082)+
draw_image(orbicella_image, x = -0.02, y = 0.378, scale=0.064)+
draw_image(porites_image, x = 0.13, y = 0.385, scale=0.06)+
draw_image(siderastrea_image, x = 0.28, y = 0.385, scale=0.052)+
draw_image(stephanocinea_image, x = 0.427, y = 0.384, scale=0.061)
selectivity_genus_final
#adding coral images to figure (image placement is off in R, but good in ggsave generated png)
selectivity_genus_final <- cowplot::ggdraw() +
draw_plot(selectivity_genus_temp)+ #adds the plot (order matters to overlay the layers correctly)
draw_image(agaricia_image, x = -0.32, y = 0.38, scale=0.1)+
draw_image(madracis_image, x = -0.17, y = 0.38, scale=0.082)+
draw_image(orbicella_image, x = -0.02, y = 0.378, scale=0.064)+
draw_image(porites_image, x = 0.13, y = 0.385, scale=0.06)+
draw_image(siderastrea_image, x = 0.28, y = 0.385, scale=0.049)+
draw_image(stephanocinea_image, x = 0.427, y = 0.384, scale=0.061)
selectivity_genus_final
#adding coral images to figure (image placement is off in R, but good in ggsave generated png)
selectivity_genus_final <- cowplot::ggdraw() +
draw_plot(selectivity_genus_temp)+ #adds the plot (order matters to overlay the layers correctly)
draw_image(agaricia_image, x = -0.32, y = 0.38, scale=0.1)+
draw_image(madracis_image, x = -0.17, y = 0.38, scale=0.082)+
draw_image(orbicella_image, x = -0.02, y = 0.378, scale=0.064)+
draw_image(porites_image, x = 0.13, y = 0.385, scale=0.06)+
draw_image(siderastrea_image, x = 0.28, y = 0.386, scale=0.049)+
draw_image(stephanocinea_image, x = 0.427, y = 0.384, scale=0.061)
selectivity_genus_final
#adding coral images to figure (image placement is off in R, but good in ggsave generated png)
selectivity_genus_final <- cowplot::ggdraw() +
draw_plot(selectivity_genus_temp)+ #adds the plot (order matters to overlay the layers correctly)
draw_image(agaricia_image, x = -0.32, y = 0.38, scale=0.1)+
draw_image(madracis_image, x = -0.17, y = 0.38, scale=0.082)+
draw_image(orbicella_image, x = -0.02, y = 0.378, scale=0.064)+
draw_image(porites_image, x = 0.13, y = 0.385, scale=0.06)+
draw_image(siderastrea_image, x = 0.28, y = 0.386, scale=0.049)+
draw_image(stephanocinea_image, x = 0.427, y = 0.385, scale=0.061)
selectivity_genus_final
#adding coral images to figure (image placement is off in R, but good in ggsave generated png)
selectivity_genus_final <- cowplot::ggdraw() +
draw_plot(selectivity_genus_temp)+ #adds the plot (order matters to overlay the layers correctly)
draw_image(agaricia_image, x = -0.32, y = 0.38, scale=0.1)+
draw_image(madracis_image, x = -0.17, y = 0.38, scale=0.082)+
draw_image(orbicella_image, x = -0.02, y = 0.378, scale=0.064)+
draw_image(porites_image, x = 0.13, y = 0.385, scale=0.06)+
draw_image(siderastrea_image, x = 0.28, y = 0.386, scale=0.049)+
draw_image(stephanocinea_image, x = 0.427, y = 0.387, scale=0.061)
selectivity_genus_final
#adding coral images to figure (image placement is off in R, but good in ggsave generated png)
selectivity_genus_final <- cowplot::ggdraw() +
draw_plot(selectivity_genus_temp)+ #adds the plot (order matters to overlay the layers correctly)
draw_image(agaricia_image, x = -0.32, y = 0.38, scale=0.1)+
draw_image(madracis_image, x = -0.17, y = 0.38, scale=0.082)+
draw_image(orbicella_image, x = -0.02, y = 0.378, scale=0.064)+
draw_image(porites_image, x = 0.13, y = 0.385, scale=0.06)+
draw_image(siderastrea_image, x = 0.28, y = 0.386, scale=0.049)+
draw_image(stephanocinea_image, x = 0.427, y = 0.389, scale=0.061)
selectivity_genus_final
#adding coral images to figure (image placement is off in R, but good in ggsave generated png)
selectivity_genus_final <- cowplot::ggdraw() +
draw_plot(selectivity_genus_temp)+ #adds the plot (order matters to overlay the layers correctly)
draw_image(agaricia_image, x = -0.32, y = 0.38, scale=0.1)+
draw_image(madracis_image, x = -0.17, y = 0.38, scale=0.082)+
draw_image(orbicella_image, x = -0.02, y = 0.378, scale=0.064)+
draw_image(porites_image, x = 0.13, y = 0.385, scale=0.06)+
draw_image(siderastrea_image, x = 0.28, y = 0.386, scale=0.049)+
draw_image(stephanocinea_image, x = 0.429, y = 0.387, scale=0.061)
selectivity_genus_final
#adding coral images to figure (image placement is off in R, but good in ggsave generated png)
selectivity_genus_final <- cowplot::ggdraw() +
draw_plot(selectivity_genus_temp)+ #adds the plot (order matters to overlay the layers correctly)
draw_image(agaricia_image, x = -0.32, y = 0.385, scale=0.1)+
draw_image(madracis_image, x = -0.17, y = 0.385, scale=0.082)+
draw_image(orbicella_image, x = -0.02, y = 0.379, scale=0.064)+
draw_image(porites_image, x = 0.13, y = 0.386, scale=0.059)+
draw_image(siderastrea_image, x = 0.28, y = 0.387, scale=0.049)+
draw_image(stephanocinea_image, x = 0.429, y = 0.387, scale=0.061)
selectivity_genus_final
#saving figure
ggsave(plot=selectivity_genus_final, filename=here("figures_tables/fig3_selectivity_by_genera.jpg"), width = 215, height = 110, dpi = 600, units = "mm")
#adding coral images to figure (image placement is off in R, but good in ggsave generated png)
selectivity_genus_final <- cowplot::ggdraw() +
draw_plot(selectivity_genus_temp)+ #adds the plot (order matters to overlay the layers correctly)
draw_image(agaricia_image, x = -0.32, y = 0.385, scale=0.11)+
draw_image(madracis_image, x = -0.17, y = 0.385, scale=0.082)+
draw_image(orbicella_image, x = -0.02, y = 0.379, scale=0.064)+
draw_image(porites_image, x = 0.13, y = 0.386, scale=0.059)+
draw_image(siderastrea_image, x = 0.28, y = 0.387, scale=0.049)+
draw_image(stephanocinea_image, x = 0.429, y = 0.387, scale=0.059)
selectivity_genus_final
#saving figure
ggsave(plot=selectivity_genus_final, filename=here("figures_tables/fig3_selectivity_by_genera.jpg"), width = 215, height = 110, dpi = 600, units = "mm")
#adding coral images to figure (image placement is off in R, but good in ggsave generated png)
selectivity_genus_final <- cowplot::ggdraw() +
draw_plot(selectivity_genus_temp)+ #adds the plot (order matters to overlay the layers correctly)
draw_image(agaricia_image, x = -0.32, y = 0.385, scale=0.11)+
draw_image(madracis_image, x = -0.17, y = 0.385, scale=0.082)+
draw_image(orbicella_image, x = -0.02, y = 0.38, scale=0.064)+
draw_image(porites_image, x = 0.13, y = 0.386, scale=0.059)+
draw_image(siderastrea_image, x = 0.28, y = 0.387, scale=0.049)+
draw_image(stephanocinea_image, x = 0.429, y = 0.387, scale=0.059)
selectivity_genus_final
selectivity_genus_final
#saving figure
ggsave(plot=selectivity_genus_final, filename=here("figures_tables/fig3_selectivity_by_genera.jpg"), width = 215, height = 110, dpi = 600, units = "mm")
write_csv(table_s4, here("supplements/table_s4_site_level_glmm_results.csv"))
write_csv(table_s4, here("supplements/table_s4_site_level_glmm_results.csv"))
write_csv(table_s4, here("supplements/tabletest_s4_site_level_glmm_results.csv"))
coral_scar_df
View(coral_scar_df)
coral_scar_df %>% filter(n_new_scars>0) %>% filter(coral_species=="Agaricia spp.")
if (!require(tidyverse)) install.packages("tidyverse")
if (!require(here)) install.packages("here")
packages <- c("tidyverse", "here")
sapply(packages, require, character.only = T)
#coral surveys
coralsurv_PAN13 <- read_csv(here("coral_scar_paired_surveys/raw_data/pan2013_coralsurvey.csv"))
if (!require(tidyverse)) install.packages("tidyverse")
if (!require(here)) install.packages("here")
packages <- c("tidyverse", "here")
sapply(packages, require, character.only = T)
#coral surveys
coralsurv_PAN13 <- read_csv(here("coral_scar_paired_surveys/raw_data/pan2013_coralsurvey.csv"))
